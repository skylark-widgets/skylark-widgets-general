/**
 * skylark-widgets-tabs - The skylark tabs widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-tabs/
 * @license MIT
 */
define(["skylark-langx-numerics/Vector2","skylark-widgets-base/dnd/DragBuffer","skylark-widgets-base/Widget","skylark-widgets-base/panels/Panel","./tabs","./TabElement","./TabButton"],function(t,e,s,i,n,h){"use strict";var o=s.inherit({klassName:"TabGroup",_construct:function(h,a){s.prototype._construct.call(this,h,"div");var l=this,u=this.getSkin();this._elm.style.overflow="visible",this._elm.style.backgroundColor=u.panelColor,this.preventDragEvents(),this.buttons=new i(this),this.buttons.element.style.backgroundColor=u.barColor,this.buttons.element.ondrop=function(t){t.preventDefault();var s=t.dataTransfer.getData("uuid"),i=e.get(s);i instanceof n&&(l.attachTab(i),e.pop(s))},this.tab=new i(this),this.empty=document.createElement("div"),this.empty.style.position="absolute",this.empty.style.textAlign="center",this.empty.style.display="none",this.empty.style.width="100%",this.empty.style.height="100%",this.empty.style.flexDirection="column",this.empty.style.justifyContent="center",this.empty.style.pointerEvents="none",this.empty.appendChild(document.createTextNode(Locale.openTabToEditContent)),this._elm.appendChild(this.empty),this.selected=null,this.buttonSize=new t(150,22),this.placement=void 0!==a?a:o.TOP,this.setPlacement(this.placement),this.items=[],this.focused=!1,this._elm.onmouseenter=function(){l.focused=!0},this._elm.onmouseleave=function(){l.focused=!1}},updateMetadata:function(){for(var t=0;t<this.items.length;t++)this.items[t].updateMetadata()},updateObjectsView:function(){for(var t=0;t<this.items.length;t++)this.items[t].updateObjectsView()},attachTab:function(t,e){return t.container.removeTab(t.index,!0),t.container=this,t.button.attachTo(this.buttons),t.attachTo(this.tab),void 0!==e?(t.index=e,this.items.splice(e,0,t)):(t.index=this.items.length,this.items.push(t)),null===this.selected&&this.selectTab(t),this.updateItemIndex(),this.updateInterface(),t},moveTabIndex:function(t,e){var s=this.items[t];this.items.splice(t,1),this.items.splice(e,0,s),this.updateItemIndex(),this.updateInterface()},updateSelection:function(){for(var t=0;t<this.items.length;t++)this.items[t].updateSelection()},updateSettings:function(){for(var t=0;t<this.items.length;t++)this.items[t].updateSettings()},getActiveTab:function(){return null!==this.selected?this.selected:null},closeActual:function(){null!==this.selected&&this.selected.closeable&&(this.selected.deactivate(),this.removeTab(this.selected))},selectTab:function(t){null!==this.selected&&this.selected.deactivate(),t instanceof n?(this.selected=t,this.selected.activate()):"number"==typeof t&&t>-1&&t<this.items.length?(this.selected=this.items[t],this.selected.activate()):this.selected=null,this.empty.style.display=null===this.selected?"flex":"none",this.updateInterface()},selectNextTab:function(){this.items.length>0&&this.selectTab((this.selected.index+1)%this.items.length)},selectPreviousTab:function(){this.items.length>0&&(0===this.selected.index?this.selectTab(this.items.length-1):this.selectTab(this.selected.index-1))},addTab:function(t,e){var s=new t(this.tab,e,this,this.items.length);return s.button=new h(this.buttons,s),this.items.push(s),null===this.selected||1===this.items.length?this.selectTab(s):this.updateInterface(),s},getTab:function(t,e){for(var s=0;s<this.items.length;s++)if(this.items[s]instanceof t&&(void 0===e||this.items[s].isAttached(e)))return this.items[s];return null},removeTab:function(t,e){if("object"==typeof t&&(t=this.items.indexOf(t)),t>-1&&t<this.items.length){var s=this.items[t];return!0!==e&&s.destroy(),this.items.splice(t,1),this.updateItemIndex(),this.selected===s&&this.items.length>0?this.selectTab(0!==t?t-1:0):this.selectTab(null),s}return null},clear:function(t){if(!0===t){for(;this.items.length>0;)this.items.pop().destroy();this.selectTab(null)}else{for(var e=0;e<this.items.length;)this.items[e].closeable?(this.items[e].destroy(),this.items.splice(e,1)):e++;-1===this.items.indexOf(this.selected)&&this.items.length>0&&this.selectTab(0)}},updateItemIndex:function(){for(var t=0;t<this.items.length;t++)this.items[t].index=t},setPlacement:function(t){this.placement=t},updateSize:function(){s.prototype.updateSize.call(this);var t=this.size.clone(),e=this.buttonSize.clone(),i=this.buttonSize.clone();this.placement===o.TOP||this.placement===o.BOTTOM?(e.x*this.items.length>this.size.x&&(e.x=this.size.x/this.items.length,i.x=e.x),t.y-=this.buttonSize.y,i.y=0):this.placement!==o.LEFT&&this.placement!==o.RIGHT||(e.y*this.items.length>this.size.y&&(e.y=this.size.y/this.items.length,i.y=e.y),t.x-=this.buttonSize.x,i.x=0);for(var n=0;n<this.items.length;n++){var h=this.items[n];h.visible=this.selected===h,h.size.copy(t),h.updateInterface();var a=h.button;a.size.copy(e),a.position.copy(i),a.position.multiplyScalar(n),a.updateInterface()}this.tab.size.copy(t),this.tab.updateSize(),this.placement===o.TOP?(this.buttons.position.set(0,0),this.buttons.updatePosition(),this.buttons.size.set(this.size.x,this.buttonSize.y),this.buttons.updateSize(),this.tab.position.set(0,this.buttonSize.y),this.tab.updatePosition()):this.placement===o.BOTTOM?(this.buttons.position.set(0,this.size.y-this.buttonSize.y),this.buttons.updatePosition(),this.buttons.size.set(this.size.x,this.buttonSize.y),this.buttons.updateSize(),this.tab.position.set(0,0),this.tab.updatePosition()):this.placement===o.LEFT?(this.buttons.position.set(0,0),this.buttons.updatePosition(),this.buttons.size.set(this.buttonSize.x,this.size.y),this.buttons.updateSize(),this.tab.position.set(this.buttonSize.x,0),this.tab.updatePosition()):this.placement===o.RIGHT&&(this.buttons.position.set(this.size.x-this.buttonSize.x,0),this.buttons.updatePosition(),this.buttons.size.set(this.buttonSize.x,this.size.y),this.buttons.updateSize(),this.tab.position.set(0,0),this.tab.updatePosition())}});return o.TOP=0,o.BOTTOM=1,o.LEFT=2,o.RIGHT=3,tabs.TabGroup=o});
//# sourceMappingURL=sourcemaps/TabGroup.js.map
