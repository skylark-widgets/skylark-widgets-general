/**
 * skylark-widgets-tabs - The skylark tabs widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-tabs/
 * @license MIT
 */
define(["skylark-devices-points/mouse","skylark-widgets-base/Widget","./tabs"],function(t,e,s){"use strict";var i=e.inherit({klassName:"TabButton",_construct:function(s,o){e.prototype._construct.call(this,s,"div");var l=this;this._elm.draggable=!0,this._elm.style.cursor="pointer",this._elm.style.boxSizing="border-box";var n=this.getSkin();this._elm.style.backgroundColor=n.buttonColor,this.tab=o,this.icon=document.createWidget("img"),this.icon.style.pointerEvents="none",this.icon.style.position="absolute",this.icon.src=o.icon,this._elm.appendChild(this.icon),this.text=document.createWidget("div"),this.text.style.position="absolute",this.text.style.overflow="hidden",this.text.style.textAlign="center",this.text.style.pointerEvents="none",this.text.style.textOverflow="ellipsis",this.text.style.whiteSpace="nowrap",this.text.style.color=n.textColor,this._elm.appendChild(this.text),this.title=document.createTextNode(o.title),this.text.appendChild(this.title),this.close=document.createWidget("img"),this.close.draggable=!1,this.close.style.position="absolute",this.close.style.opacity=.5,this.close.style.display=o.closeable?"block":"none",this.close.src=n.closeIconUrl,this._elm.appendChild(this.close),this.close.onmouseenter=function(){this.style.opacity=1},this.close.onmouseleave=function(){this.style.opacity=.5},this.close.onclick=function(){l.tab.close()};var h=i.NONE;this._elm.ondragstart=function(t){t.dataTransfer.setData("tab",l.tab.index),h=i.NONE},this._elm.ondrop=function(t){t.preventDefault(),this.style.borderLeft=null,this.style.borderRight=null,this.style.borderBottom=null,this.style.borderTop=null;var e=t.dataTransfer.getData("tab");""!==e&&(e=parseInt(e))!==l.tab.index&&(h===i.PREVIOUS?l.tab.container.moveTabIndex(e,e<l.tab.index?l.tab.index-1:l.tab.index):h===i.NEXT&&l.tab.container.moveTabIndex(e,e<l.tab.index?l.tab.index:l.tab.index+1))},this._elm.ondragover=function(t){l.tab.container.placement===TabGroup.TOP||l.tab.container.placement===TabGroup.BOTTOM?t.layerX>.8*l.size.x||t.target!==this?h!==i.NEXT&&(h=i.NEXT,this.style.borderLeft=null,this.style.borderRight="thick solid #999999"):t.layerX<.2*l.size.x?h!==i.PREVIOUS&&(h=i.PREVIOUS,this.style.borderRight=null,this.style.borderLeft="thick solid #999999"):h!==i.NONE&&(h=i.NONE,this.style.borderLeft=null,this.style.borderRight=null):t.layerY>.7*l.size.y||t.target!==this?h!==i.NEXT&&(h=i.NEXT,this.style.borderTop=null,this.style.borderBottom="solid #999999"):t.layerY<.3*l.size.y?h!==i.PREVIOUS&&(h=i.PREVIOUS,this.style.borderBottom=null,this.style.borderTop="solid #999999"):h!==i.NONE&&(h=i.NONE,this.style.borderBottom=null,this.style.borderTop=null)},this._elm.ondragend=function(t){t.preventDefault(),h=i.NONE,this.style.borderLeft=null,this.style.borderRight=null,this.style.borderBottom=null,this.style.borderTop=null},this._elm.ondragleave=function(t){t.preventDefault(),h=i.NONE,this.style.borderLeft=null,this.style.borderRight=null,this.style.borderBottom=null,this.style.borderTop=null},this._elm.onmousedown=function(e){e.which;t.isLeftMouseButton(e)?l.tab.container.selectTab(l.tab):o.closeable&&t.isMiddleMouseButton(e)&&l.tab.container.removeTab(l.tab)},this._elm.onmouseenter=function(){this.style.backgroundColor=n.buttonOverColor},this._elm.onmouseleave=function(){o.isSelected()?this.style.backgroundColor=n.buttonOverColor:this.style.backgroundColor=n.buttonColor}},setIcon:function(t){this.tab.icon=t,this.icon.src=t},setName:function(t){this.tab.title=t,this.title.data=t},updateSelection:function(){var t=this.getSkin();this._elm.style.backgroundColor=this.tab.isSelected()?t.buttonOverColor:t.buttonColor},updateSize:function(){e.prototype.updateSize.call(this),this.icon.style.top=.2*this.size.y+"px",this.icon.style.left=.2*this.size.y+"px",this.icon.style.width=.6*this.size.y+"px",this.icon.style.height=.6*this.size.y+"px",this.text.style.left=this.size.y+"px",this.text.style.top=(this.size.y-12)/2+"px",this.text.style.width=this.size.x-2*this.size.y+"px",this.text.style.height=this.size.y+"px",!0===this.tab.closeable?(this.close.style.width=.4*this.size.y+"px",this.close.style.height=.4*this.size.y+"px",this.close.style.top=.3*this.size.y+"px",this.close.style.right=.3*this.size.y+"px",this.close.style.display="block"):this.close.style.display="none",this.updateSelection()}});return i.NONE=0,i.PREVIOUS=1,i.NEXT=2,s.TabButton=i});
//# sourceMappingURL=sourcemaps/TabButton.js.map
