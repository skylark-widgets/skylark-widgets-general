/**
 * skylark-widgets-tabs - The skylark tabs widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-tabs/
 * @license MIT
 */
define(["skylark-domx-geom","skylark-widgets-base/dnd/DragBuffer","skylark-widgets-base/panels/DualContainer","../TabGroup","../TabElement","./TabContainer","./TabDualContainer","./TabButtonSplit"],function(t,e,a,n,i,r,s,l){"use strict";l=n.inherit({klassName:"TabButtonSplit",_construct:function(a,r){n.prototype._construct.call(this,a,r);var s=this;this.dragBorder=.2,this.canSplit=!0,this.canCollapse=!0,this.tabArea=document.createElement("div"),this.tabArea.style.zIndex="1000",this.tabArea.style.position="absolute",this.tabArea.style.backgroundColor="rgba(0.0, 0.0, 0.0, 0.2)",this.tabArea.style.pointerEvents="none",this.tab.element.ondrop=function(a){a.preventDefault();var r=a.dataTransfer.getData("uuid"),l=e.get(r);if(l instanceof i){var o=t.pagePosition(s.element),b=a.clientX-(o.x||o.left),h=a.clientY-(o.y||o.top);b<s.size.x*s.dragBorder?s.split(n.LEFT).attachTab(l):b>s.size.x*(1-s.dragBorder)?s.split(n.RIGHT).attachTab(l):h<s.size.y*s.dragBorder?s.split(n.TOP).attachTab(l):h>s.size.y*(1-s.dragBorder)?s.split(n.BOTTOM).attachTab(l):s.attachTab(l),e.pop(r)}s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)},this.tab.element.ondragover=function(a){if(a.preventDefault(),e.buffer[0]instanceof i){var n=t.pagePosition(s.element),r=a.clientX-(n.x||n.left),l=a.clientY-(n.y||n.top);r<s.size.x*s.dragBorder?(s.tabArea.style.right=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.left="0px",s.tabArea.style.width="50%",s.tabArea.style.height="100%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):r>s.size.x*(1-s.dragBorder)?(s.tabArea.style.left=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.right="0px",s.tabArea.style.width="50%",s.tabArea.style.height="100%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):l<s.size.y*s.dragBorder?(s.tabArea.style.right=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.left="0px",s.tabArea.style.width="100%",s.tabArea.style.height="50%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):l>s.size.y*(1-s.dragBorder)?(s.tabArea.style.top=null,s.tabArea.style.right=null,s.tabArea.style.bottom="0px",s.tabArea.style.left="0px",s.tabArea.style.width="100%",s.tabArea.style.height="50%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)}},this.tab.element.ondragleave=function(t){t.preventDefault(),s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)}},split:function(t){if(this.canSplit){void 0===t&&(t=n.RIGHT);var e=new s,i=this.parent,l=new TabGroupSplit(e,this.placement);return t===n.RIGHT?(e.orientation=a.HORIZONTAL,e.attach(this),e.attach(l)):t===n.LEFT?(e.orientation=a.HORIZONTAL,e.attach(l),e.attach(this)):t===n.BOTTOM?(e.orientation=a.VERTICAL,e.attach(this),e.attach(l)):t===n.TOP&&(e.orientation=a.VERTICAL,e.attach(l),e.attach(this)),i instanceof r?(i.attach(e),i.updateSize()):i instanceof a&&(i.elementA===this?(i.attachA(e),i.updateSize()):i.elementB===this&&(i.attachB(e),i.updateSize())),l}console.warn("nunuStudio: Tab is not splitable.")},collapse:function(){if(this.canCollapse)if(this.parent instanceof a){var t=this.parent.parent,e=this.parent.elementA===this?this.parent.elementB:this.parent.elementA;t instanceof a?t.elementA===this.parent?(this.parent.destroy(),this.destroy(),t.attachA(e)):t.elementB===this.parent&&(this.parent.destroy(),this.destroy(),t.attachB(e)):(this.parent.destroy(),this.destroy(),t.attach(e)),t.updateSize()}else console.warn("nunuStudio: Tab cannot be collapsed (parent is not a dual container).");else console.warn("nunuStudio: Tab is not collapsable.")},attachTab:function(t,e){var a=t.container;t=n.prototype.attachTab.call(this,t,e);return 0===a.options.length&&a.collapse(),t},removeTab:function(t,e){n.prototype.removeTab.call(this,t,e),0===this.options.length&&!0!==e&&this.collapse()},addTab:function(t,e){var a=new t(this.tab,e,this,this.options.length);return a.button=new l(this.buttons,a),a.updateInterface(),this.options.push(a),null===this.selected||1===this.options.length?this.selectTab(a):this.updateInterface(),a}});return tabs.splittable.TabGroupSplit=TabGroupSplit});
//# sourceMappingURL=../sourcemaps/splittable/TabGroupSplit.js.map
