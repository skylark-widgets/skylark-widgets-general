/**
 * skylark-widgets-tabs - The skylark tabs widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-tabs/
 * @license MIT
 */
define(["skylark-domx-geom","skylark-widgets-base/dnd/drag-buffer","skylark-widgets-base/panels/dual-container","../tabs","../tab-group","../tab-element","./tab-container","./tab-dual-container","./tab-button-split"],function(t,e,a,n,i,r,s,l,o){"use strict";var b=i.inherit({klassName:"TabGroupSplit",_construct:function(a,n){i.prototype._construct.call(this,a,n);var s=this;this.dragBorder=.2,this.canSplit=!0,this.canCollapse=!0,this.tabArea=document.createElement("div"),this.tabArea.style.zIndex="1000",this.tabArea.style.position="absolute",this.tabArea.style.backgroundColor="rgba(0.0, 0.0, 0.0, 0.2)",this.tabArea.style.pointerEvents="none",this.tab.element.ondrop=function(a){a.preventDefault();var n=a.dataTransfer.getData("uuid"),l=e.get(n);if(l instanceof r){var o=t.pagePosition(s.element),b=a.clientX-(o.x||o.left),h=a.clientY-(o.y||o.top);b<s.size.x*s.dragBorder?s.split(i.LEFT).attachTab(l):b>s.size.x*(1-s.dragBorder)?s.split(i.RIGHT).attachTab(l):h<s.size.y*s.dragBorder?s.split(i.TOP).attachTab(l):h>s.size.y*(1-s.dragBorder)?s.split(i.BOTTOM).attachTab(l):s.attachTab(l),e.pop(n)}s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)},this.tab.element.ondragover=function(a){if(a.preventDefault(),e.buffer[0]instanceof r){var n=t.pagePosition(s.element),i=a.clientX-(n.x||n.left),l=a.clientY-(n.y||n.top);i<s.size.x*s.dragBorder?(s.tabArea.style.right=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.left="0px",s.tabArea.style.width="50%",s.tabArea.style.height="100%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):i>s.size.x*(1-s.dragBorder)?(s.tabArea.style.left=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.right="0px",s.tabArea.style.width="50%",s.tabArea.style.height="100%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):l<s.size.y*s.dragBorder?(s.tabArea.style.right=null,s.tabArea.style.bottom=null,s.tabArea.style.top="0px",s.tabArea.style.left="0px",s.tabArea.style.width="100%",s.tabArea.style.height="50%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):l>s.size.y*(1-s.dragBorder)?(s.tabArea.style.top=null,s.tabArea.style.right=null,s.tabArea.style.bottom="0px",s.tabArea.style.left="0px",s.tabArea.style.width="100%",s.tabArea.style.height="50%",s.tab.element.contains(s.tabArea)||s.tab.element.appendChild(s.tabArea)):s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)}},this.tab.element.ondragleave=function(t){t.preventDefault(),s.tab.element.contains(s.tabArea)&&s.tab.element.removeChild(s.tabArea)}},split:function(t){if(this.canSplit){void 0===t&&(t=i.RIGHT);var e=new l,n=this.parent,r=new b(e,this.placement);return t===i.RIGHT?(e.orientation=a.HORIZONTAL,e.attach(this),e.attach(r)):t===i.LEFT?(e.orientation=a.HORIZONTAL,e.attach(r),e.attach(this)):t===i.BOTTOM?(e.orientation=a.VERTICAL,e.attach(this),e.attach(r)):t===i.TOP&&(e.orientation=a.VERTICAL,e.attach(r),e.attach(this)),n instanceof s?(n.attach(e),n.updateSize()):n instanceof a&&(n.elementA===this?(n.attachA(e),n.updateSize()):n.elementB===this&&(n.attachB(e),n.updateSize())),r}console.warn("nunuStudio: Tab is not splitable.")},collapse:function(){if(this.canCollapse)if(this.parent instanceof a){var t=this.parent.parent,e=this.parent.elementA===this?this.parent.elementB:this.parent.elementA;t instanceof a?t.elementA===this.parent?(this.parent.destroy(),this.destroy(),t.attachA(e)):t.elementB===this.parent&&(this.parent.destroy(),this.destroy(),t.attachB(e)):(this.parent.destroy(),this.destroy(),t.attach(e)),t.updateSize()}else console.warn("nunuStudio: Tab cannot be collapsed (parent is not a dual container).");else console.warn("nunuStudio: Tab is not collapsable.")},attachTab:function(t,e){var a=t.container;t=i.prototype.attachTab.call(this,t,e);return 0===a.items.length&&a.collapse(),t},removeTab:function(t,e){i.prototype.removeTab.call(this,t,e),0===this.items.length&&!0!==e&&this.collapse()},addTab:function(t,e){var a=new t(this.tab,e,this,this.items.length);return a.button=new o(this.buttons,a),a.updateInterface(),this.items.push(a),null===this.selected||1===this.items.length?this.selectTab(a):this.updateInterface(),a}});return n.splittable.TabGroupSplit=b});
//# sourceMappingURL=../sourcemaps/splittable/tab-group-split.js.map
