{"version":3,"sources":["splittable/TabButtonSplit.js"],"names":["define","mouse","DragBuffer","Widget","tabs","TabElement","TabGroup","TabButtonSplit","inherit","klassName","_construct","parent","tab","prototype","call","this","self","_elm","draggable","style","cursor","boxSizing","skin","getSkin","backgroundColor","buttonColor","icon","document","createElement","pointerEvents","position","src","appendChild","text","overflow","textAlign","textOverflow","whiteSpace","color","Editor","theme","textColor","title","createTextNode","close","opacity","display","Global","FILE_PATH","onmouseenter","onmouseleave","onclick","dragState","NONE","ondragstart","event","dataTransfer","setData","uuid","push","index","ondrop","preventDefault","borderLeft","borderRight","borderBottom","borderTop","getData","get","container","parseInt","PREVIOUS","moveTabIndex","NEXT","pop","attachTab","ondragover","placement","TOP","BOTTOM","layerX","size","x","target","layerY","y","ondragend","ondragleave","onmousedown","which","isLeftMouseButton","selectTab","closeable","isMiddleMouseButton","removeTab","buttonOverColor","isSelected","setIcon","setName","data","updateSelection","updateSize","top","left","width","height","right","splittable"],"mappings":"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","file":"../../splittable/TabButtonSplit.js","sourcesContent":["define([\n\t\"skylark-devices-points/mouse\",\n\t\"skylark-widgets-base/dnd/DragBuffer\",\n\n\t\"skylark-widgets-base/Widget\",\n\t\"../tabs\",\n\t\"../TabElement\",\n\t\"../TabGroup\"\n],function(\n\tmouse,\n\n\tDragBuffer,\n\tWidget,\n\n\ttabs,\n\tTabElement,\n\tTabGroup\n){\n\t\"use strict\";\n\n\t/**\n\t * Tab button is used to navigate trough tabs.\n\t *\n\t * The split version of the tab button is intended to be used alongside splitable tab groups.\n\t * \n\t * @class TabButtonSplit\n\t * @extends {Widget}\n\t * @param {Widget} parent\n\t * @param {TabElement} tab\n\t */\n\t var TabButtonSplit = Widget.inherit({\n\t \t\"klassName\" : \"TabButtonSplit\",\n\n\t\t\"_construct\" : function (parent, tab)\n\t\t{\n\t\t\tWidget.prototype._construct.call(this, parent, \"div\");\n\n\t\t\tvar self = this;\n\n\t\t\tthis._elm.draggable = true;\n\t\t\tthis._elm.style.cursor = \"pointer\";\n\t\t\tthis._elm.style.boxSizing = \"border-box\";\n\n\n\t\t\tvar skin = this.getSkin();\n\t\t\t//this._elm.style.backgroundColor = Editor.theme.buttonColor;\n\t\t\tthis._elm.style.backgroundColor = skin.buttonColor;\n\n\t\t\t//Tab\n\t\t\tthis.tab = tab;\n\n\t\t\t//Icon\n\t\t\tthis.icon = document.createElement(\"img\");\n\t\t\tthis.icon.style.pointerEvents = \"none\";\n\t\t\tthis.icon.style.position = \"absolute\";\n\t\t\tthis.icon.src = tab.icon;\n\t\t\tthis._elm.appendChild(this.icon);\n\n\t\t\t//Text\n\t\t\tthis.text = document.createElement(\"div\");\n\t\t\tthis.text.style.position = \"absolute\";\n\t\t\tthis.text.style.overflow = \"hidden\";\n\t\t\tthis.text.style.textAlign = \"center\";\n\t\t\tthis.text.style.pointerEvents = \"none\";\n\t\t\tthis.text.style.textOverflow = \"ellipsis\";\n\t\t\tthis.text.style.whiteSpace = \"nowrap\";\n\t\t\tthis.text.style.color = Editor.theme.textColor;\n\t\t\tthis._elm.appendChild(this.text);\n\n\t\t\t//Title\n\t\t\tthis.title = document.createTextNode(tab.title);\n\t\t\tthis.text.appendChild(this.title);\n\n\t\t\t//Close button\n\t\t\tthis.close = document.createElement(\"img\");\n\t\t\tthis.close.draggable = false;\n\t\t\tthis.close.style.position = \"absolute\";\n\t\t\tthis.close.style.opacity = 0.5;\n\t\t\tthis.close.style.display = (tab.closeable) ? \"block\" : \"none\";\n\t\t\tthis.close.src = Global.FILE_PATH + \"icons/misc/close.png\";\n\t\t\tthis._elm.appendChild(this.close);\n\n\t\t\tthis.close.onmouseenter = function()\n\t\t\t{\n\t\t\t\tthis.style.opacity = 1.0;\n\t\t\t};\n\n\t\t\tthis.close.onmouseleave = function()\n\t\t\t{\n\t\t\t\tthis.style.opacity = 0.5;\n\t\t\t};\n\n\t\t\tthis.close.onclick = function()\n\t\t\t{\n\t\t\t\tself.tab.close();\n\t\t\t};\n\t\t\t\n\t\t\t//Drag state\n\t\t\tvar dragState = TabButtonSplit.NONE;\n\n\t\t\t//Drag control\n\t\t\tthis._elm.ondragstart = function(event)\t{\n\t\t\t\tevent.dataTransfer.setData(\"uuid\", self.tab.uuid);\n\t\t\t\tDragBuffer.push(self.tab);\n\n\t\t\t\tevent.dataTransfer.setData(\"tab\", self.tab.index);\n\t\t\t\tdragState = TabButtonSplit.NONE;\n\t\t\t};\n\n\t\t\t//Drag drop\n\t\t\tthis._elm.ondrop = function(event){\tevent.preventDefault();\n\t\t\t\tthis.style.borderLeft = null;\n\t\t\t\tthis.style.borderRight = null;\n\t\t\t\tthis.style.borderBottom = null;\n\t\t\t\tthis.style.borderTop = null;\n\n\t\t\t\tvar uuid = event.dataTransfer.getData(\"uuid\");\n\t\t\t\tvar tab = DragBuffer.get(uuid);\n\n\t\t\t\tif(tab instanceof TabElement){\n\t\t\t\t\t//In the same container\n\t\t\t\t\tif(tab.container === self.tab.container){\n\t\t\t\t\t\tvar index = event.dataTransfer.getData(\"tab\");\n\t\t\t\t\t\tindex = parseInt(index);\n\n\t\t\t\t\t\tif(index !== self.tab.index){\t\n\t\t\t\t\t\t\t//Before\n\t\t\t\t\t\t\tif(dragState === TabButtonSplit.PREVIOUS)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tself.tab.container.moveTabIndex(index, index < self.tab.index ? self.tab.index - 1 : self.tab.index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//After\n\t\t\t\t\t\t\telse if(dragState === TabButtonSplit.NEXT)\t{\n\t\t\t\t\t\t\t\tself.tab.container.moveTabIndex(index, index < self.tab.index ? self.tab.index : self.tab.index + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tDragBuffer.pop(uuid);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//From another container\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t//Before\n\t\t\t\t\t\tif(dragState === TabButtonSplit.PREVIOUS){\n\t\t\t\t\t\t\tself.tab.container.attachTab(tab, self.tab.index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//After\n\t\t\t\t\t\telse if(dragState === TabButtonSplit.NEXT){\n\t\t\t\t\t\t\tself.tab.container.attachTab(tab, self.tab.index + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tDragBuffer.pop(uuid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//Drag over\n\t\t\tthis._elm.ondragover = function(event){\n\t\t\t\tif(self.tab.container.placement === TabGroup.TOP || self.tab.container.placement === TabGroup.BOTTOM){\t\n\t\t\t\t\tif(event.layerX > self.size.x * 0.8 || event.target !== this)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.NEXT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdragState = TabButtonSplit.NEXT;\n\t\t\t\t\t\t\tthis.style.borderLeft = null;\n\t\t\t\t\t\t\tthis.style.borderRight = \"thick solid #999999\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.layerX < self.size.x * 0.2){\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.PREVIOUS){\n\t\t\t\t\t\t\tdragState = TabButtonSplit.PREVIOUS;\n\t\t\t\t\t\t\tthis.style.borderRight = null;\n\t\t\t\t\t\t\tthis.style.borderLeft = \"thick solid #999999\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.NONE){\n\t\t\t\t\t\t\tdragState = TabButtonSplit.NONE;\n\t\t\t\t\t\t\tthis.style.borderLeft = null;\n\t\t\t\t\t\t\tthis.style.borderRight = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(event.layerY > self.size.y * 0.7 || event.target !== this)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.NEXT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdragState = TabButtonSplit.NEXT;\n\t\t\t\t\t\t\tthis.style.borderTop = null;\n\t\t\t\t\t\t\tthis.style.borderBottom = \"solid #999999\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.layerY < self.size.y * 0.3)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.PREVIOUS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdragState = TabButtonSplit.PREVIOUS;\n\t\t\t\t\t\t\tthis.style.borderBottom = null;\n\t\t\t\t\t\t\tthis.style.borderTop = \"solid #999999\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif(dragState !== TabButtonSplit.NONE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdragState = TabButtonSplit.NONE;\n\t\t\t\t\t\t\tthis.style.borderBottom = null;\n\t\t\t\t\t\t\tthis.style.borderTop = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//Drag end\n\t\t\tthis._elm.ondragend = function(event)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\t\n\t\t\t\tDragBuffer.pop(self.tab.uuid);\n\n\t\t\t\tdragState = TabButtonSplit.NONE;\n\t\t\t\tthis.style.borderLeft = null;\n\t\t\t\tthis.style.borderRight = null;\n\t\t\t\tthis.style.borderBottom = null;\n\t\t\t\tthis.style.borderTop = null;\n\t\t\t};\n\n\t\t\t//Drag leave\n\t\t\tthis._elm.ondragleave = function(event)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\t\n\t\t\t\tdragState = TabButtonSplit.NONE;\n\t\t\t\tthis.style.borderLeft = null;\n\t\t\t\tthis.style.borderRight = null;\n\t\t\t\tthis.style.borderBottom = null;\n\t\t\t\tthis.style.borderTop = null;\n\t\t\t};\n\n\t\t\t//Mouse down\n\t\t\tthis._elm.onmousedown = function(event)\n\t\t\t{\n\t\t\t\tvar button = event.which - 1;\n\n\t\t\t\t//Select tab\n\t\t\t\t//if(button === Mouse.LEFT)\n\t\t\t\tif (mouse.isLeftMouseButton(event))\t{\n\t\t\t\t\tself.tab.container.selectTab(self.tab);\n\t\t\t\t}\n\t\t\t\t//Close tab\n\t\t\t\t//else if(tab.closeable && button === Mouse.MIDDLE)\n\t\t\t\telse if(tab.closeable && mouse.isMiddleMouseButton(event))\n\t\t\t\t{\n\t\t\t\t\tself.tab.container.removeTab(self.tab);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//Mouse enter\n\t\t\tthis._elm.onmouseenter = function()\n\t\t\t{\n\t\t\t\t//this.style.backgroundColor = Editor.theme.buttonOverColor;\n\t\t\t\tthis.style.backgroundColor = skin.buttonOverColor;\n\t\t\t};\n\n\t\t\t//Mouse leave\n\t\t\tthis._elm.onmouseleave = function()\n\t\t\t{\n\t\t\t\tif(tab.isSelected())\n\t\t\t\t{\n\t\t\t\t\t//this.style.backgroundColor = Editor.theme.buttonOverColor;\n\t\t\t\t\tthis.style.backgroundColor = skin.buttonOverColor;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t//this.style.backgroundColor = Editor.theme.buttonColor;\n\t\t\t\t\tthis.style.backgroundColor = skin.buttonColor;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\n\t\t/**\n\t\t * Set the tab icon image.\n\t\t *\n\t\t * @method setIcon\n\t\t * @param {String} icon URL of the icon image.\n\t\t */\n\t\tsetIcon : function(icon) {\n\t\t\tthis.tab.icon = icon;\n\t\t\tthis.icon.src = icon;\n\t\t},\n\n\t\t/**\n\t\t * Set text to be displayed in the button as its name.\n\t\t *\n\t\t * @method setName\n\t\t * @param {String} text\n\t\t */\n\t\tsetName : function(text) {\n\t\t\tthis.tab.title = text;\n\t\t\tthis.title.data = text;\n\t\t},\n\n\t\tupdateSelection : function() {\n\t\t\t//this._elm.style.backgroundColor = this.tab.isSelected() ? Editor.theme.buttonOverColor : Editor.theme.buttonColor;\n\t\t\tvar skin = this.getSkin();\n\t\t\tthis._elm.style.backgroundColor = this.tab.isSelected() ? skin.buttonOverColor : skin.buttonColor;\n\t\t},\n\n\t\tupdateSize : function(){\n\t\t\tWidget.prototype.updateSize.call(this);\n\t\t\t\n\t\t\t//Icon\n\t\t\tthis.icon.style.top = (this.size.y * 0.2) + \"px\";\n\t\t\tthis.icon.style.left = (this.size.y * 0.2) + \"px\"\n\t\t\tthis.icon.style.width = (this.size.y * 0.6) + \"px\";\n\t\t\tthis.icon.style.height = (this.size.y * 0.6) + \"px\";\n\n\t\t\t//Text\n\t\t\tthis.text.style.left = this.size.y + \"px\";\n\t\t\tthis.text.style.top = ((this.size.y - 12) / 2) + \"px\";\n\t\t\tthis.text.style.width = (this.size.x - 2 * this.size.y) + \"px\";\n\t\t\tthis.text.style.height = this.size.y + \"px\";\n\n\t\t\t//Close\n\t\t\tif(this.tab.closeable === true)\n\t\t\t{\n\t\t\t\tthis.close.style.width = (this.size.y * 0.4) + \"px\";\n\t\t\t\tthis.close.style.height = (this.size.y * 0.4) + \"px\";\n\t\t\t\tthis.close.style.top = (this.size.y * 0.3) + \"px\";\n\t\t\t\tthis.close.style.right = (this.size.y * 0.3) + \"px\";\n\t\t\t\tthis.close.style.display = \"block\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close.style.display = \"none\";\n\t\t\t}\n\n\t\t\tthis.updateSelection();\n\t\t}\n\n\t });\n\n\tTabButtonSplit.NONE = 0;\n\tTabButtonSplit.PREVIOUS = 1;\n\tTabButtonSplit.NEXT = 2;\n\n\n\treturn tabs.splittable.TabButtonSplit = TabButtonSplit;\n});\n"]}