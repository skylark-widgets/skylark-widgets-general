{"version":3,"sources":["TabGroup.js"],"names":["define","Vector2","DragBuffer","Widget","Panel","tabs","TabElement","TabButton","TabGroup","inherit","klassName","_construct","parent","placement","prototype","call","this","self","skin","getSkin","_elm","style","overflow","backgroundColor","panelColor","preventDragEvents","buttons","element","barColor","ondrop","event","preventDefault","uuid","dataTransfer","getData","tab","get","attachTab","pop","empty","document","createElement","position","textAlign","display","width","height","flexDirection","justifyContent","pointerEvents","appendChild","createTextNode","Locale","openTabToEditContent","selected","buttonSize","undefined","TOP","setPlacement","items","focused","onmouseenter","onmouseleave","updateMetadata","i","length","updateObjectsView","insertIndex","container","removeTab","index","button","setParent","splice","push","selectTab","updateItemIndex","updateInterface","moveTabIndex","origin","destination","updateSelection","updateSettings","getActiveTab","closeActual","closeable","deactivate","activate","selectNextTab","selectPreviousTab","addTab","TabConstructor","getTab","type","object","isAttached","dontDestroy","indexOf","destroy","clear","forceAll","updateSize","tabSize","size","clone","offset","BOTTOM","x","y","LEFT","RIGHT","visible","copy","multiplyScalar","set","updatePosition"],"mappings":"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","file":"../TabGroup.js","sourcesContent":["define([\r\n\t\"skylark-langx-numerics/Vector2\",\r\n\t\"skylark-widgets-base/dnd/DragBuffer\",\r\n\r\n\t\"skylark-widgets-base/Widget\",\r\n\t\"skylark-widgets-base/panels/Panel\",\r\n\t\"./tabs\",\r\n\t\"./TabElement\",\r\n\t\"./TabButton\"\r\n\r\n],function(\r\n\tVector2,\r\n\tDragBuffer,\r\n\tWidget,\r\n\tPanel,\r\n\ttabs,\r\n\tTabElement,\r\n\tTabButton\r\n){\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A tab group contains and manages tab elements.\r\n\t *\r\n\t * The group is also responsible for creating and managing the lifecycle of its tab elements.\r\n\t * \r\n\t * @class TabGroup\r\n\t * @extends {Widget}\r\n\t * @param {Widget} parent Parent element.\r\n\t */\r\n\r\n\t var TabGroup = Panel.inherit({\r\n\t \t\"klassName\" : \"TabGroup\",\r\n\r\n\t\t\"_construct\" : function (parent, placement)\r\n\t\t{\r\n\t\t\tPanel.prototype._construct.call(this, parent);\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar skin = this.getSkin();\r\n\r\n\t\t\tthis._elm.style.overflow = \"visible\";\r\n\t\t\t//this._elm.style.backgroundColor = Editor.theme.panelColor;\r\n\t\t\tthis._elm.style.backgroundColor = skin.panelColor;\r\n\r\n\t\t\tthis.preventDragEvents();\r\n\t\t\t\r\n\t\t\t// Buttons\r\n\t\t\tthis.buttons = new Panel(this);\r\n\t\t\t//this.buttons.element.style.backgroundColor = Editor.theme.barColor;\r\n\t\t\tthis.buttons.element.style.backgroundColor = skin.barColor;\r\n\t\t\tthis.buttons.element.ondrop = function(event)\r\n\t\t\t{\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar uuid = event.dataTransfer.getData(\"uuid\");\r\n\t\t\t\tvar tab = DragBuffer.get(uuid);\r\n\r\n\t\t\t\tif(tab instanceof TabElement)\r\n\t\t\t\t{\r\n\t\t\t\t\tself.attachTab(tab);\r\n\t\t\t\t\tDragBuffer.pop(uuid);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Tab\r\n\t\t\tthis.tab = new Panel(this);\r\n\r\n\t\t\t/**\r\n\t\t\t * Panel used to display a message indicating that the tab is empty.\r\n\t\t\t *\r\n\t\t\t * @property empty\r\n\t\t\t * @type {Widget}\r\n\t\t\t */\r\n\t\t\tthis.empty = document.createElement(\"div\");\r\n\t\t\tthis.empty.style.position = \"absolute\";\r\n\t\t\tthis.empty.style.textAlign = \"center\";\r\n\t\t\tthis.empty.style.display = \"none\";\r\n\t\t\tthis.empty.style.width = \"100%\";\r\n\t\t\tthis.empty.style.height = \"100%\";\r\n\t\t\tthis.empty.style.flexDirection = \"column\";\r\n\t\t\tthis.empty.style.justifyContent = \"center\";\r\n\t\t\tthis.empty.style.pointerEvents = \"none\";\r\n\t\t\tthis.empty.appendChild(document.createTextNode(Locale.openTabToEditContent));\r\n\t\t\tthis._elm.appendChild(this.empty);\r\n\r\n\t\t\t/**\r\n\t\t\t * Tab that is currently selected.\r\n\t\t\t *\r\n\t\t\t * @property selected\r\n\t\t\t * @type {TabElement}\r\n\t\t\t */\r\n\t\t\tthis.selected = null;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * Base size of the buttons in this group.\r\n\t\t\t * \r\n\t\t\t * Size may be ajusted to fit the available space.\r\n\t\t\t *\r\n\t\t\t * @property buttonSize\r\n\t\t\t * @type {Vector2}\r\n\t\t\t */\r\n\t\t\tthis.buttonSize = new Vector2(150, 22);\r\n\r\n\t\t\t/**\r\n\t\t\t * Tab buttons placement.\r\n\t\t\t *\r\n\t\t\t * @property placement\r\n\t\t\t * @type {number}\r\n\t\t\t */\r\n\t\t\tthis.placement = placement !== undefined ? placement : TabGroup.TOP;\r\n\t\t\tthis.setPlacement(this.placement);\r\n\r\n\t\t\t/**\r\n\t\t\t * Tab elements attache to this group.\r\n\t\t\t * \r\n\t\t\t * @type {Array}\r\n\t\t\t */\r\n\t\t\tthis.items = [];\r\n\r\n\t\t\t/**\r\n\t\t\t * Indicates if the tab is currently on focus.\r\n\t\t\t *\r\n\t\t\t * @property focused\r\n\t\t\t * @type {boolean}\r\n\t\t\t */\r\n\t\t\tthis.focused = false;\r\n\r\n\t\t\tthis._elm.onmouseenter = function()\r\n\t\t\t{\r\n\t\t\t\tself.focused = true;\r\n\t\t\t};\r\n\t\t\tthis._elm.onmouseleave = function()\r\n\t\t\t{\r\n\t\t\t\tself.focused = false;\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update all tabs object data.\r\n\t\t *\r\n\t\t * @method updateMetadata\r\n\t\t */\r\n\t\tupdateMetadata : function(){\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].updateMetadata();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update all tab object views.\r\n\t\t *\r\n\t\t * @method updateMetadata\r\n\t\t */\r\n\t\tupdateObjectsView : function(){\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].updateObjectsView();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Attach tab to this group and remove it from the original group.\r\n\t\t *\r\n\t\t * @method attachTab\r\n\t\t * @param {TabElement} tab Tab to be moved.\r\n\t\t * @param {number} insertIndex Index where to place the tab.\r\n\t\t */\r\n\t\tattachTab : function(tab, insertIndex){\t\r\n\t\t\t// Remove from old group\r\n\t\t\ttab.container.removeTab(tab.index, true);\r\n\t\t\t\r\n\t\t\t// Attach to this group\r\n\t\t\ttab.container = this;\r\n\t\t\ttab.button.setParent(this.buttons);\r\n\t\t\ttab.setParent(this.tab);\r\n\t\t\t\r\n\t\t\t// Add to items\r\n\t\t\tif(insertIndex !== undefined){\r\n\t\t\t\ttab.index = insertIndex;\r\n\t\t\t\tthis.items.splice(insertIndex, 0, tab);\r\n\t\t\t}else{\r\n\t\t\t\ttab.index = this.items.length;\r\n\t\t\t\tthis.items.push(tab);\r\n\t\t\t}\r\n\r\n\t\t\t// Select the tab if none selected\r\n\t\t\tif(this.selected === null)\t{\r\n\t\t\t\tthis.selectTab(tab);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.updateItemIndex();\r\n\t\t\tthis.updateInterface();\r\n\r\n\t\t\treturn tab;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Move tab from position to another.\r\n\t\t *\r\n\t\t * @method moveTabIndex\r\n\t\t * @param {number} origin Origin index.\r\n\t\t * @param {number} destination Destination index.\r\n\t\t */\r\n\t\tmoveTabIndex : function(origin, destination)\t{\r\n\t\t\tvar button = this.items[origin];\r\n\r\n\t\t\tthis.items.splice(origin, 1);\r\n\t\t\tthis.items.splice(destination, 0, button);\r\n\r\n\t\t\tthis.updateItemIndex();\r\n\t\t\tthis.updateInterface();\r\n\t\t},\r\n\r\n\t\tupdateSelection : function()\t{\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].updateSelection();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateSettings : function()\t{\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].updateSettings();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get the currently active tab of the group.\r\n\t\t *\r\n\t\t * @method getActiveTab\r\n\t\t */\r\n\t\tgetActiveTab : function(){\r\n\t\t\tif(this.selected !== null)\r\n\t\t\t{\r\n\t\t\t\treturn this.selected;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Close actual tab if its closeable.\r\n\t\t *\r\n\t\t * @method closeActual\r\n\t\t */\r\n\t\tcloseActual : function()\t{\r\n\t\t\tif(this.selected !== null && this.selected.closeable)\r\n\t\t\t{\r\n\t\t\t\tthis.selected.deactivate();\r\n\t\t\t\tthis.removeTab(this.selected);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t * Select tab to set active on this group.\r\n\t\t *\r\n\t\t * If not valid tab is selected the actual selection will be cleared.\r\n\t\t *\r\n\t\t * @method selectTab\r\n\t\t * @param {TabElement} tab TabElement to be selected or index in the tab array.\r\n\t\t */\r\n\t\tselectTab : function(tab){\r\n\t\t\tif(this.selected !== null)\r\n\t\t\t{\r\n\t\t\t\tthis.selected.deactivate();\r\n\t\t\t}\r\n\r\n\t\t\t// Tab as a TabElement object\r\n\t\t\tif(tab instanceof TabElement)\r\n\t\t\t{\r\n\t\t\t\tthis.selected = tab;\r\n\t\t\t\tthis.selected.activate();\r\n\t\t\t}\r\n\t\t\t// Tab as a index\r\n\t\t\telse if(typeof tab === \"number\" && tab > -1 && tab < this.items.length)\r\n\t\t\t{\r\n\t\t\t\tthis.selected = this.items[tab];\r\n\t\t\t\tthis.selected.activate();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.selected = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.empty.style.display = this.selected === null ? \"flex\" : \"none\";\r\n\t\t\tthis.updateInterface();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Select next tab.\r\n\t\t *\r\n\t\t * @method selectNextTab\r\n\t\t */\r\n\t\tselectNextTab : function(){\r\n\t\t\tif(this.items.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.selectTab((this.selected.index + 1) % this.items.length);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Select previous tab.\r\n\t\t *\r\n\t\t * @method selectPreviousTab\r\n\t\t */\r\n\t\tselectPreviousTab : function(){\r\n\t\t\tif(this.items.length > 0)\r\n\t\t\t{\r\n\t\t\t\tif(this.selected.index === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.selectTab(this.items.length - 1);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.selectTab(this.selected.index - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Add new option to tab group.\r\n\t\t *\r\n\t\t * @method addtab\r\n\t\t */\r\n\t\taddTab : function(TabConstructor, closeable)\t{\r\n\t\t\tvar tab = new TabConstructor(this.tab, closeable, this, this.items.length);\r\n\t\t\ttab.button = new TabButton(this.buttons, tab);\r\n\t\t\tthis.items.push(tab);\r\n\t\t\t\r\n\t\t\tif(this.selected === null || this.items.length === 1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectTab(tab);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.updateInterface();\r\n\t\t\t}\r\n\r\n\t\t\treturn tab;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get tab from tab type and attached object is there is any.\r\n\t\t *\r\n\t\t * @method getTab\r\n\t\t * @param {Constructor} type Type of tab to look for.\r\n\t\t * @param {Object} object Object attached to the tab.\r\n\t\t */\r\n\t\tgetTab : function(type, object){\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif(this.items[i] instanceof type)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(object === undefined || this.items[i].isAttached(object))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn this.items[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove tab from group.\r\n\t\t *\r\n\t\t * @method removeTab\r\n\t\t * @param {number} index Index of tab to look for.\r\n\t\t * @param {boolean} dontDestroy If true the element is not destroyed.\r\n\t\t */\r\n\t\tremoveTab : function(index, dontDestroy)\t{\t\r\n\t\t\t// If index is an object get the actual index\r\n\t\t\tif(typeof index === \"object\"){\r\n\t\t\t\tindex = this.items.indexOf(index);\r\n\t\t\t}\r\n\r\n\t\t\t// Check if the index is in range\r\n\t\t\tif(index > -1 && index < this.items.length){\r\n\t\t\t\tvar tab = this.items[index];\r\n\r\n\t\t\t\tif(dontDestroy !== true)\r\n\t\t\t\t{\r\n\t\t\t\t\ttab.destroy();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.items.splice(index, 1);\r\n\t\t\t\tthis.updateItemIndex();\r\n\r\n\t\t\t\t// Select option\r\n\t\t\t\tif(this.selected === tab)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(this.items.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.selectTab(index !== 0 ? index - 1 : 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.selectTab(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tthis.selectTab(null);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn tab;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Remove all closable tabs from the group.\r\n\t\t *\r\n\t\t * @method clear\r\n\t\t * @param {boolean} forceAll Remove also the not closable tabs.\r\n\t\t */\r\n\t\tclear : function(forceAll){\r\n\t\t\tif(forceAll === true)\r\n\t\t\t{\r\n\t\t\t\twhile(this.items.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.items.pop().destroy();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.selectTab(null);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\twhile(i < this.items.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(this.items[i].closeable)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.items[i].destroy();\r\n\t\t\t\t\t\tthis.items.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check is selected tab is still available\r\n\t\t\t\tvar index = this.items.indexOf(this.selected);\r\n\t\t\t\tif(index === -1 && this.items.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.selectTab(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Update index variable stored in the tabs.\r\n\t\t *\r\n\t\t * @method updateItemIndex\r\n\t\t */\r\n\t\tupdateItemIndex : function(){\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tthis.items[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Set the tab group buttons placement.\r\n\t\t *\r\n\t\t * @method setPlacement\r\n\t\t * @param {number} placement\r\n\t\t */\r\n\t\tsetPlacement : function(placement){\r\n\t\t\tthis.placement = placement;\r\n\t\t},\r\n\r\n\t\tupdateSize : function(){\r\n\t\t\tPanel.prototype.updateSize.call(this);\r\n\r\n\t\t\tvar tabSize = this.size.clone();\r\n\t\t\tvar buttonSize = this.buttonSize.clone();\r\n\t\t\tvar offset = this.buttonSize.clone();\r\n\r\n\t\t\t// Calculate size of the buttons and offset\r\n\t\t\tif(this.placement === TabGroup.TOP || this.placement === TabGroup.BOTTOM)\r\n\t\t\t{\r\n\t\t\t\tif(buttonSize.x * this.items.length > this.size.x)\r\n\t\t\t\t{\r\n\t\t\t\t\tbuttonSize.x = this.size.x / this.items.length;\r\n\t\t\t\t\toffset.x = buttonSize.x;\r\n\t\t\t\t}\r\n\t\t\t\ttabSize.y -= this.buttonSize.y;\r\n\t\t\t\toffset.y = 0;\r\n\t\t\t}\r\n\t\t\telse if(this.placement === TabGroup.LEFT || this.placement === TabGroup.RIGHT)\r\n\t\t\t{\r\n\t\t\t\tif(buttonSize.y * this.items.length > this.size.y)\r\n\t\t\t\t{\r\n\t\t\t\t\tbuttonSize.y = this.size.y / this.items.length;\r\n\t\t\t\t\toffset.y = buttonSize.y;\r\n\t\t\t\t}\r\n\t\t\t\ttabSize.x -= this.buttonSize.x;\r\n\t\t\t\toffset.x = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Update tab and buttons\r\n\t\t\tfor(var i = 0; i < this.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar tab = this.items[i];\r\n\t\t\t\ttab.visible = this.selected === tab;\r\n\t\t\t\ttab.size.copy(tabSize);\r\n\t\t\t\ttab.updateInterface();\r\n\r\n\t\t\t\tvar button = tab.button;\r\n\t\t\t\tbutton.size.copy(buttonSize);\r\n\t\t\t\tbutton.position.copy(offset);\r\n\t\t\t\tbutton.position.multiplyScalar(i);\r\n\t\t\t\tbutton.updateInterface();\r\n\t\t\t}\r\n\r\n\t\t\tthis.tab.size.copy(tabSize);\r\n\t\t\tthis.tab.updateSize();\r\n\r\n\t\t\t// Position buttons and tab division\r\n\t\t\tif(this.placement === TabGroup.TOP)\r\n\t\t\t{\t\r\n\t\t\t\tthis.buttons.position.set(0, 0);\r\n\t\t\t\tthis.buttons.updatePosition();\r\n\t\t\t\tthis.buttons.size.set(this.size.x, this.buttonSize.y);\r\n\t\t\t\tthis.buttons.updateSize();\r\n\r\n\t\t\t\tthis.tab.position.set(0, this.buttonSize.y);\r\n\t\t\t\tthis.tab.updatePosition();\r\n\t\t\t}\r\n\t\t\telse if(this.placement === TabGroup.BOTTOM)\r\n\t\t\t{\r\n\t\t\t\tthis.buttons.position.set(0, this.size.y - this.buttonSize.y);\r\n\t\t\t\tthis.buttons.updatePosition();\r\n\t\t\t\tthis.buttons.size.set(this.size.x, this.buttonSize.y);\r\n\t\t\t\tthis.buttons.updateSize();\r\n\r\n\t\t\t\tthis.tab.position.set(0, 0);\r\n\t\t\t\tthis.tab.updatePosition();\r\n\t\t\t}\r\n\t\t\telse if(this.placement === TabGroup.LEFT)\r\n\t\t\t{\r\n\t\t\t\tthis.buttons.position.set(0, 0);\r\n\t\t\t\tthis.buttons.updatePosition();\r\n\t\t\t\tthis.buttons.size.set(this.buttonSize.x, this.size.y);\r\n\t\t\t\tthis.buttons.updateSize();\r\n\t\t\t\t\r\n\t\t\t\tthis.tab.position.set(this.buttonSize.x, 0);\r\n\t\t\t\tthis.tab.updatePosition();\r\n\t\t\t}\r\n\t\t\telse if(this.placement === TabGroup.RIGHT)\r\n\t\t\t{\r\n\t\t\t\tthis.buttons.position.set(this.size.x - this.buttonSize.x, 0);\r\n\t\t\t\tthis.buttons.updatePosition();\r\n\t\t\t\tthis.buttons.size.set(this.buttonSize.x, this.size.y);\r\n\t\t\t\tthis.buttons.updateSize();\r\n\r\n\t\t\t\tthis.tab.position.set(0, 0);\r\n\t\t\t\tthis.tab.updatePosition();\r\n\t\t\t}\r\n\t\t}\r\n\t });\r\n\r\n\r\n\r\n\tTabGroup.TOP = 0;\r\n\tTabGroup.BOTTOM = 1;\r\n\tTabGroup.LEFT = 2;\r\n\tTabGroup.RIGHT = 3;\r\n\r\n\r\n\treturn tabs.TabGroup = TabGroup;\r\n\r\n});"]}